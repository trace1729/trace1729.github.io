
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../PA2%20summery/">
      
      
        <link rel="next" href="../org-mode/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>EE219 project - blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../stylesheets/status.css">
    
      <link rel="stylesheet" href="../../stylesheets/custom.css">
    
      <link rel="stylesheet" href="https://cdn.tonycrane.cc/lxgw/lxgwscreen.css">
    
      <link rel="stylesheet" href="https://cdn.tonycrane.cc/jbmono/jetbrainsmono.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ee219-project" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="blog" class="md-header__button md-logo" aria-label="blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              EE219 project
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="暗色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="暗色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="indigo"  aria-label="亮色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="亮色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/trace1729/trace1729.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    blog
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../%E5%86%99%E4%BD%9C%E6%8C%87%E5%8D%97/" class="md-tabs__link">
        
  
    
  
  写作指南

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../archive/cs61c-intro-risc/" class="md-tabs__link">
          
  
  Archive

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../PA2%20summery/" class="md-tabs__link">
          
  
  Notes

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="blog" class="md-nav__button md-logo" aria-label="blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/trace1729/trace1729.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    blog
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E5%86%99%E4%BD%9C%E6%8C%87%E5%8D%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    写作指南
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../archive/cs61c-intro-risc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CS61C 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../archive/math-equation-test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    math_equation_test
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../archive/%E8%80%83%E7%A0%94/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    考研
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PA2%20summery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    EE219 project
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../org-mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Table of Contents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../verilog_lab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数字电路实验
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    15445 Database
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            15445 Database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../15445%20Database/p0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    P0
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    6.s081 OS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            6.s081 OS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The starting process of xv6
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/lab1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/lab10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab10
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/lab2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/lab3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/lab4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/lab5%28cow%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab5(cow)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/lab6%28scheduling%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab6(scheduling)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/lab7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab7
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/lab8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab8
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/lab9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab9
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.s081%20OS/summery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.s081 总结
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Algo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Algo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algo/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Algo/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    算法笔记
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Android
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Android
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/Room/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Room
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/cornell_lec01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cornell lec01
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/cornell_lec02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cornell lec02
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/cornell_lec03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cornell lec03
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/coroutine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coroutine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/dataStore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dataStore
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/error/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Http
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/kotlin_syntax/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kotlin syntax
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/material_design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Material design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/navigation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Navigation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/viewModel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    viewModel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/%E7%88%AC%E8%99%AB%E5%88%86%E6%9E%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    爬虫分析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Android/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    需求文档
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CS106L cpp 
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            CS106L cpp 
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CS106L%20cpp%20/cpp%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cpp笔记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CS106L%20cpp%20/operator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CS106L%20cpp%20/template_function/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About template
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            DL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DL/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习笔记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DL/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习论文笔记
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_11" >
        
          
          <label class="md-nav__link" for="__nav_4_11" id="__nav_4_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Java Spring
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_11">
            <span class="md-nav__icon md-icon"></span>
            Java Spring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java%20Spring/Java%20SSM%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java SSM笔记（一）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java%20Spring/Java%20SSM%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL高级
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java%20Spring/SSM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java%20Spring/Spring%20MVC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spring MVC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Java%20Spring/Spring%20Security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spring Security
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_12" >
        
          
          <label class="md-nav__link" for="__nav_4_12" id="__nav_4_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_12">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/Manjaro%2BWindows%E5%8F%8C%E7%B3%BB%E7%BB%9F%E6%95%99%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manjaro+Windows 双系统安装教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/outline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分享会
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E6%8B%BE%E9%81%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常用配置拾遗
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_12_4" >
        
          
          <label class="md-nav__link" for="__nav_4_12_4" id="__nav_4_12_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sysadmin
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_12_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_12_4">
            <span class="md-nav__icon md-icon"></span>
            Sysadmin
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/sysadmin/lab1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/sysadmin/lab4%28systemd%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Systemd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/sysadmin/lab5%28network%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/sysadmin/lab6%28network%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    network 进阶版 (包含 nginx)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/sysadmin/lab7%28encrypt%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encrypt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/sysadmin/lab9%28docker%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_12_5" >
        
          
          <label class="md-nav__link" for="__nav_4_12_5" id="__nav_4_12_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    实用网站
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_12_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_12_5">
            <span class="md-nav__icon md-icon"></span>
            实用网站
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/%E5%AE%9E%E7%94%A8%E7%BD%91%E7%AB%99/%E5%85%AC%E5%BC%80%E8%AF%BE%E7%BD%91%E7%AB%99/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    公开课网站
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_13" >
        
          
          <label class="md-nav__link" for="__nav_4_13" id="__nav_4_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    一生一芯
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_13">
            <span class="md-nav__icon md-icon"></span>
            一生一芯
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E4%B8%80%E7%94%9F%E4%B8%80%E8%8A%AF/PA1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PA1 复盘
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="ee219-project">EE219 project</h1>
<h1 id="_1">项目的目的是什么</h1>
<p>核心目标是设计<strong>自定义指令</strong>，实现上层 AI 应用与硬件之间的高效交互。</p>
<hr />
<h2 id="_2">软件部分</h2>
<ol>
<li>
<p><strong>基础实现</strong><br />
   即便完全不使用自定义指令，也可以完成推理任务，例如运行经典的 LeNet 模型。然而，这种方式会消耗更多的时间周期，性能较低。</p>
</li>
<li>
<p><strong>优化实现</strong><br />
   使用自定义指令能够显著加速运算，例如指导硬件模块加速矩阵计算的核心任务。</p>
</li>
</ol>
<p>具体步骤包括：</p>
<ul>
<li>设计自定义指令集，用以支持矩阵运算、卷积等关键功能。</li>
<li>将这些自定义指令通过内联汇编封装成函数接口。</li>
<li>利用这些接口，将原生的 C 语言实现改写为支持自定义指令的版本，从而充分利用硬件加速能力。</li>
</ul>
<hr />
<h2 id="_3">硬件部分</h2>
<p>为了支持自定义指令，我们需要在硬件中完成以下模块的实现：</p>
<ul>
<li><strong>卷积层</strong>：处理输入特征图和卷积核的矩阵运算。</li>
<li><strong>ReLU 层</strong>：激活函数模块，用于非线性变换。</li>
<li><strong>全连接层</strong>：实现网络的分类或回归任务。</li>
</ul>
<p>这些模块共同组成了支持自定义指令的硬件计算框架。</p>
<hr />
<h2 id="_4">构建流程</h2>
<p>当我们运行 <code>make run CFILE=xxx</code> 命令时，实际发生了以下几步操作：</p>
<ol>
<li>
<p><strong>构建处理器（build）</strong><br />
   使用 Verilator 将 Verilog 描述的处理器转化为 C++ 仿真模型，同时链接 C++ 激励文件以生成可执行仿真程序。</p>
</li>
<li>
<p><strong>生成参考结果（model）</strong><br />
   使用 Python 脚本运行软件模型，生成用于对比的黄金标准结果。</p>
</li>
<li>
<p><strong>编译 C 程序（compile）</strong><br />
   借助 AM 框架，将 C 源代码编译为汇编指令，并提取出指令二进制文件以供硬件仿真使用。</p>
</li>
</ol>
<p>最后，仿真程序会加载指定的参数运行，并验证仿真结果是否符合预期。</p>
<hr />
<h2 id="_5">方法论</h2>
<p><code>model.h</code> 文件中没有任何注释，这给调试带来了极大的困扰——一不留神就可能搞不清楚权重参数到底存储在哪里。</p>
<hr />
<h2 id="_6">原始软件实现</h2>
<p>在 <code>model.py</code> 中，我们依次完成了以下任务：</p>
<ol>
<li>
<p><strong>加载预训练参数</strong><br />
   包括每一层的权重参数（<code>weights</code>）、输入量化比例（<code>input_scale</code>）以及输出量化比例（<code>output_scale</code>）。</p>
</li>
<li>
<p><strong>运行推理并保存中间结果</strong><br />
   使用加载的模型对 CIFAR 数据集中的一张图片进行推理，同时在推理过程中将每一层的中间计算结果保存为 <code>.npy</code> 文件（如 <code>xxx.npy</code>），便于后续分析。</p>
</li>
<li>
<p><strong>导出量化权重和缩放因子</strong><br />
   遍历每一层的参数，将权重量化到 8-bit，并将缩放因子调整为 2 的幂，最终将这些数据保存为二进制文件（<code>xxx.bin</code>），供硬件加载使用。</p>
</li>
</ol>
<hr />
<h2 id="_7">硬件仿真测试</h2>
<p>为了在 C 程序中实现与 <code>model.py</code> 等价的功能，我们需要解决一些关键问题。</p>
<h3 id="c">问题：如何在 C 程序中获取权重参数？</h3>
<p>由于 AM 框架不支持直接从文件中读取权重参数，这需要通过以下方法解决：</p>
<ul>
<li>AM 框架的内存访问依赖于 DPI-C 接口实现。这意味着权重参数需要预先加载到一个模拟框架提供的 C 数组中。</li>
<li><code>xxx.bin</code> 文件中的数据已加载到这个 C 数组中，数据的基地址由宏 <code>ADDR_DATA</code> 定义。</li>
<li>文件 <code>model.h</code> 提供了每一层参数起始地址的宏定义，通过这些宏可以准确定位各层的权重和偏置数据。</li>
</ul>
<hr />
<h2 id="_8">加速！</h2>
<p>通过定义自定义指令并结合硬件支持，我们可以高效完成推理任务，从而显著提升模型的运行速度。</p>
<hr />
<div class="highlight"><pre><span></span><code>Now I need to write C code to achieve the following job:
The program will build a neutral framework as this:

        self.conv1  = nn.Conv2d(3, 12, 5, bias=False)
        self.pool   = nn.MaxPool2d(2, 2)
        self.conv2  = nn.Conv2d(12, 32, 3, bias=False)
        self.fc1    = nn.Linear(32 * 6 * 6, 256, bias=False)
        self.fc2    = nn.Linear(256, 64, bias=False)
        self.fc3    = nn.Linear(64, 10, bias=True)

You can read weigh of all layer by accessing the memory, the offset of the start index of each index is listed in model.h which will be presented as follows

#define ADDR_DATA           0x80800000
#define ADDR_SAVE           0x80f00000

#define INPUT_INT8_CONV1    3*32*32
#define WEIGHT_INT8_CONV1   12*3*5*5
#define SCALE_INT8_CONV1    1
#define WEIGHT_INT8_CONV2   32*12*3*3
#define SCALE_INT8_CONV2    1
#define WEIGHT_INT8_FC1     32*6*6*256
#define SCALE_INT8_FC1      1
#define WEIGHT_INT8_FC2     256*64
#define SCALE_INT8_FC2      1
#define WEIGHT_INT8_FC3     64*10
#define BIAS_INT16_FC3      10*2
#define SCALE_INT8_FC3      1

#define OUTPUT_INT8_CONV1   12*28*28
#define OUTPUT_INT8_POOL1   12*14*14
#define OUTPUT_INT8_CONV2   32*12*12
#define OUTPUT_INT8_POOL2   32*6*6
#define OUTPUT_INT8_FC1     256
#define OUTPUT_INT8_FC2     64
#define OUTPUT_INT8_FC3     10

#define ADDR_INPUT          ADDR_DATA
#define ADDR_WCONV1         ADDR_INPUT  + INPUT_INT8_CONV1
#define ADDR_SCONV1         ADDR_WCONV1 + WEIGHT_INT8_CONV1
#define ADDR_WCONV2         ADDR_SCONV1 + SCALE_INT8_CONV1
#define ADDR_SCONV2         ADDR_WCONV2 + WEIGHT_INT8_CONV2
#define ADDR_WFC1           ADDR_SCONV2 + SCALE_INT8_CONV2
#define ADDR_SFC1           ADDR_WFC1   + WEIGHT_INT8_FC1
#define ADDR_WFC2           ADDR_SFC1   + SCALE_INT8_FC1
#define ADDR_SFC2           ADDR_WFC2   + WEIGHT_INT8_FC2
#define ADDR_WFC3           ADDR_SFC2   + SCALE_INT8_FC2
#define ADDR_BFC3           ADDR_WFC3   + WEIGHT_INT8_FC3
#define ADDR_SFC3           ADDR_BFC3   + BIAS_INT16_FC3


#define ADDR_OUTCONV1       ADDR_SAVE   
#define ADDR_OUTPOOL1       ADDR_OUTCONV1 + OUTPUT_INT8_CONV1
#define ADDR_OUTCONV2       ADDR_OUTPOOL1 + OUTPUT_INT8_POOL1
#define ADDR_OUTPOOL2       ADDR_OUTCONV2 + OUTPUT_INT8_CONV2
#define ADDR_OUTFC1         ADDR_OUTPOOL2 + OUTPUT_INT8_POOL2
#define ADDR_OUTFC2         ADDR_OUTFC1   + OUTPUT_INT8_FC1
#define ADDR_OUTFC3         ADDR_OUTFC2   + OUTPUT_INT8_FC2

#endif 

The program can get the input data from ADDR_INPUT, and perform inference process which includes the layers aforementioned whose weight can be accessed using macro in mode.h as listed above.

Finally, the C code will be run on a bare machine, which only provides limited runtime library, which listed as follows:
// string.h
void  *memset    (void *s, int c, size_t n);
void  *memcpy    (void *dst, const void *src, size_t n);
void  *memmove   (void *dst, const void *src, size_t n);
int    memcmp    (const void *s1, const void *s2, size_t n);
size_t strlen    (const char *s);
char  *strcat    (char *dst, const char *src);
char  *strcpy    (char *dst, const char *src);
char  *strncpy   (char *dst, const char *src, size_t n);
int    strcmp    (const char *s1, const char *s2);
int    strncmp   (const char *s1, const char *s2, size_t n);

// stdlib.h
void   srand     (unsigned int seed);
int    rand      (void);
void  *malloc    (size_t size);
void   free      (void *ptr);
int    abs       (int x);
int    atoi      (const char *nptr);

// stdio.h
int    printf_s    (const char *format, ...);
int    sprintf_s   (char *str, const char *format, ...);
int    snprintf_s  (char *str, size_t size, const char *format, ...);
int    vsprintf_s (char *str, const char *format, va_list ap);
int    vsnprintf_s (char *str, size_t size, const char *format, va_list ap);

// printf.h
void _putchar(char character);
#define printf printf_
int printf_(const char* format, ...);
#define sprintf sprintf_
int sprintf_(char* buffer, const char* format, ...);
#define snprintf  snprintf_
#define vsnprintf vsnprintf_
int  snprintf_(char* buffer, size_t count, const char* format, ...);
int vsnprintf_(char* buffer, size_t count, const char* format, va_list va);
#define vprintf vprintf_
int vprintf_(const char* format, va_list va);
int fctprintf(void (*out)(char character, void* arg), void* arg, const char* format, ...);


Help me write c code that perform the above task, and rember add some printf statement for better debugging. If you are confused about anything, please remind me to give you more infomation.
and remember to convert constant to uintptr_t first to avoid type mismatch.
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;trap.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;model.h&quot;</span>

<span class="cm">/*--------------------------------------------------------------------------------------*</span>
<span class="cm"> * Helper functions for memory access. </span>
<span class="cm"> * Always cast the #define addresses to (uintptr_t) first to avoid type mismatch.</span>
<span class="cm"> *--------------------------------------------------------------------------------------*/</span>

<span class="cm">/**</span>
<span class="cm"> * Simple naive conv2d for int8 input/weights, int8 output</span>
<span class="cm"> *   in_w, in_h: width &amp; height of the input feature map</span>
<span class="cm"> *   kernel_size: e.g. 3 or 5</span>
<span class="cm"> *   in_ch, out_ch: input &amp; output channels</span>
<span class="cm"> *   stride: typically 1</span>
<span class="cm"> *   p_in, p_w, p_out: pointers to input, weight, output memory</span>
<span class="cm"> */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">conv2d_naive_int8</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int8_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_in</span><span class="p">,</span><span class="w">        </span><span class="cm">/* input tensor */</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int8_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_w</span><span class="p">,</span><span class="w">         </span><span class="cm">/* weight tensor */</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">       </span><span class="o">*</span><span class="n">p_out</span><span class="p">,</span><span class="w">       </span><span class="cm">/* output tensor */</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">in_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">in_h</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">in_ch</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">out_ch</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">kernel_size</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">stride</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">out_w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">in_w</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">kernel_size</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">stride</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">out_h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">in_h</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">kernel_size</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">stride</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// For each output channel</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">out_ch</span><span class="p">;</span><span class="w"> </span><span class="n">oc</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// For each output y/x</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">oy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">oy</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">out_h</span><span class="p">;</span><span class="w"> </span><span class="n">oy</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">ox</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">out_w</span><span class="p">;</span><span class="w"> </span><span class="n">ox</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="c1">// Compute convolution</span>
<span class="w">                </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">  </span><span class="c1">// 32-bit accumulator</span>
<span class="w">                </span><span class="c1">// Weighted sum</span>
<span class="w">                </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">ic</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">in_ch</span><span class="p">;</span><span class="w"> </span><span class="n">ic</span><span class="o">++</span><span class="p">)</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ky</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">ky</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">kernel_size</span><span class="p">;</span><span class="w"> </span><span class="n">ky</span><span class="o">++</span><span class="p">)</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">kx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">kx</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">kernel_size</span><span class="p">;</span><span class="w"> </span><span class="n">kx</span><span class="o">++</span><span class="p">)</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="kt">int</span><span class="w"> </span><span class="n">in_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ox</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">stride</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">kx</span><span class="p">;</span>
<span class="w">                            </span><span class="kt">int</span><span class="w"> </span><span class="n">in_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oy</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">stride</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ky</span><span class="p">;</span>

<span class="w">                            </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">val_in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_in</span><span class="p">[</span><span class="n">ic</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">in_w</span><span class="o">*</span><span class="n">in_h</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">in_y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">in_w</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">in_x</span><span class="p">];</span>
<span class="w">                            </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">val_w</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">p_w</span><span class="p">[</span><span class="n">oc</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">in_ch</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kernel_size</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kernel_size</span><span class="p">)</span>
<span class="w">                                             </span><span class="o">+</span><span class="w"> </span><span class="n">ic</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">kernel_size</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kernel_size</span><span class="p">)</span>
<span class="w">                                             </span><span class="o">+</span><span class="w"> </span><span class="n">ky</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kernel_size</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">kx</span><span class="p">];</span>
<span class="w">                            </span><span class="n">acc</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="kt">int32_t</span><span class="p">)</span><span class="n">val_in</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="kt">int32_t</span><span class="p">)</span><span class="n">val_w</span><span class="p">;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="c1">// Naive scale or shift if needed. For now, just clamp to int8:</span>
<span class="w">                </span><span class="c1">// In a real scenario, you&#39;d do: acc = (acc * scale) &gt;&gt; shift, or something similar.</span>
<span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="n">acc</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">127</span><span class="p">)</span><span class="w">  </span><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">127</span><span class="p">;</span>
<span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="n">acc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">-128</span><span class="p">)</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-128</span><span class="p">;</span>

<span class="w">                </span><span class="n">p_out</span><span class="p">[</span><span class="n">oc</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">out_w</span><span class="o">*</span><span class="n">out_h</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">oy</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">out_w</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ox</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="p">)</span><span class="n">acc</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Simple MaxPool2D with kernel=2, stride=2, no overlap, int8</span>
<span class="cm"> *   in_ch: # input channels</span>
<span class="cm"> *   in_w, in_h: input width &amp; height</span>
<span class="cm"> *   out_w, out_h: output width &amp; height</span>
<span class="cm"> */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">maxpool2d_2x2_stride2_int8</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int8_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_in</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">       </span><span class="o">*</span><span class="n">p_out</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">in_ch</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">in_w</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">in_h</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// With 2x2, stride=2, output dims are in_w/2, in_h/2 (assuming in_w, in_h are even)</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">out_w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in_w</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">out_h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in_h</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">in_ch</span><span class="p">;</span><span class="w"> </span><span class="n">c</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">oy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">oy</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">out_h</span><span class="p">;</span><span class="w"> </span><span class="n">oy</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">ox</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">out_w</span><span class="p">;</span><span class="w"> </span><span class="n">ox</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">max_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-128</span><span class="p">;</span>
<span class="w">                </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ky</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">ky</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">ky</span><span class="o">++</span><span class="p">)</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">kx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">kx</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">kx</span><span class="o">++</span><span class="p">)</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">in_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ox</span><span class="o">*</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">kx</span><span class="p">;</span>
<span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">in_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oy</span><span class="o">*</span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ky</span><span class="p">;</span>
<span class="w">                        </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_in</span><span class="p">[</span><span class="n">c</span><span class="o">*</span><span class="p">(</span><span class="n">in_w</span><span class="o">*</span><span class="n">in_h</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">in_y</span><span class="o">*</span><span class="n">in_w</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">in_x</span><span class="p">];</span>
<span class="w">                        </span><span class="k">if</span><span class="p">(</span><span class="n">val</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max_val</span><span class="p">)</span>
<span class="w">                            </span><span class="n">max_val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="n">p_out</span><span class="p">[</span><span class="n">c</span><span class="o">*</span><span class="p">(</span><span class="n">out_w</span><span class="o">*</span><span class="n">out_h</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">oy</span><span class="o">*</span><span class="n">out_w</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ox</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max_val</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Fully-connected (linear) layer with int8 input, int8 weight, optional int16 bias, int8 output.</span>
<span class="cm"> *   in_features, out_features: e.g., for FC1: in_features=32*6*6=1152, out_features=256</span>
<span class="cm"> *   p_in, p_w, p_b, p_out: pointers to input, weight, bias, output memory</span>
<span class="cm"> *   has_bias: 1 if bias is present, 0 if no bias</span>
<span class="cm"> */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">fc_naive_int8</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int8_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_in</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int8_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_w</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int16_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_b</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">       </span><span class="o">*</span><span class="n">p_out</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">in_features</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">out_features</span><span class="p">,</span>
<span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">has_bias</span>
<span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">out_features</span><span class="p">;</span><span class="w"> </span><span class="n">o</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// Dot product</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">in_features</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">val_in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int32_t</span><span class="p">)</span><span class="n">p_in</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">            </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">val_w</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int32_t</span><span class="p">)</span><span class="n">p_w</span><span class="p">[</span><span class="n">o</span><span class="o">*</span><span class="n">in_features</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">];</span>
<span class="w">            </span><span class="n">acc</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">val_in</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">val_w</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="c1">// Add bias if present (note that BIAS_INT16_FC3 says it&#39;s 16-bit, so cast properly)</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">has_bias</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">acc</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="kt">int32_t</span><span class="p">)</span><span class="n">p_b</span><span class="p">[</span><span class="n">o</span><span class="p">];</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="c1">// Naively clamp to int8</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">acc</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">127</span><span class="p">)</span><span class="w">  </span><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">127</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">acc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">-128</span><span class="p">)</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-128</span><span class="p">;</span>

<span class="w">        </span><span class="n">p_out</span><span class="p">[</span><span class="n">o</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="p">)</span><span class="n">acc</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cm">/*--------------------------------------------------------------------------------------*</span>
<span class="cm"> * The main inference function</span>
<span class="cm"> *--------------------------------------------------------------------------------------*/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// 1) Convert addresses to pointers</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_input</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_INPUT</span><span class="p">);</span>

<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_wconv1</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_WCONV1</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_wconv2</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_WCONV2</span><span class="p">);</span>

<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_wfc1</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_WFC1</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_wfc2</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_WFC2</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_wfc3</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_WFC3</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int16_t</span><span class="w"> </span><span class="o">*</span><span class="n">p_bfc3</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int16_t</span><span class="w"> </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_BFC3</span><span class="p">);</span>


<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_outconv1</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_OUTCONV1</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_outpool1</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_OUTPOOL1</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_outconv2</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_OUTCONV2</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_outpool2</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_OUTPOOL2</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_outfc1</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_OUTFC1</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_outfc2</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_OUTFC2</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="n">p_outfc3</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int8_t</span><span class="w">  </span><span class="o">*</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)(</span><span class="n">ADDR_OUTFC3</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Debug prints</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;DEBUG: p_input   = 0x%08x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)</span><span class="n">p_input</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;DEBUG: p_wconv1  = 0x%08x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)</span><span class="n">p_wconv1</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;DEBUG: p_outconv1= 0x%08x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">unsigned</span><span class="p">)(</span><span class="kt">uintptr_t</span><span class="p">)</span><span class="n">p_outconv1</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// ... add more as needed</span>

<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="c1">// 2) Conv1: in=(3,32,32), out=(12,28,28), kernel=5, stride=1</span>
<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Running Conv1...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">conv2d_naive_int8</span><span class="p">(</span>
<span class="w">        </span><span class="cm">/* p_in   */</span><span class="w"> </span><span class="n">p_input</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* p_w    */</span><span class="w"> </span><span class="n">p_wconv1</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* p_out  */</span><span class="w"> </span><span class="n">p_outconv1</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* in_w   */</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* in_h   */</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* in_ch  */</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* out_ch */</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* ksize  */</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* stride */</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="c1">// 3) Pool1: MaxPool2D(2,2) =&gt; in=(12,28,28), out=(12,14,14)</span>
<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Running Pool1...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">maxpool2d_2x2_stride2_int8</span><span class="p">(</span>
<span class="w">        </span><span class="cm">/* p_in   */</span><span class="w"> </span><span class="n">p_outconv1</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* p_out  */</span><span class="w"> </span><span class="n">p_outpool1</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* in_ch  */</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* in_w   */</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* in_h   */</span><span class="w"> </span><span class="mi">28</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="c1">// 4) Conv2: in=(12,14,14), out=(32,12,12), kernel=3, stride=1</span>
<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Running Conv2...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">conv2d_naive_int8</span><span class="p">(</span>
<span class="w">        </span><span class="n">p_outpool1</span><span class="p">,</span>
<span class="w">        </span><span class="n">p_wconv2</span><span class="p">,</span>
<span class="w">        </span><span class="n">p_outconv2</span><span class="p">,</span>
<span class="w">        </span><span class="mi">14</span><span class="p">,</span>
<span class="w">        </span><span class="mi">14</span><span class="p">,</span>
<span class="w">        </span><span class="mi">12</span><span class="p">,</span>
<span class="w">        </span><span class="mi">32</span><span class="p">,</span>
<span class="w">        </span><span class="mi">3</span><span class="p">,</span>
<span class="w">        </span><span class="mi">1</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="c1">// 5) Pool2: in=(32,12,12), out=(32,6,6)</span>
<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Running Pool2...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">maxpool2d_2x2_stride2_int8</span><span class="p">(</span>
<span class="w">        </span><span class="n">p_outconv2</span><span class="p">,</span>
<span class="w">        </span><span class="n">p_outpool2</span><span class="p">,</span>
<span class="w">        </span><span class="mi">32</span><span class="p">,</span>
<span class="w">        </span><span class="mi">12</span><span class="p">,</span>
<span class="w">        </span><span class="mi">12</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="c1">// 6) FC1: in=32*6*6=1152, out=256, no bias</span>
<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Running FC1...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">fc_naive_int8</span><span class="p">(</span>
<span class="w">        </span><span class="cm">/* p_in        */</span><span class="w"> </span><span class="n">p_outpool2</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* p_w         */</span><span class="w"> </span><span class="n">p_wfc1</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* p_b         */</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w">  </span><span class="c1">// no bias for FC1</span>
<span class="w">        </span><span class="cm">/* p_out       */</span><span class="w"> </span><span class="n">p_outfc1</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* in_features */</span><span class="w"> </span><span class="mi">32</span><span class="o">*</span><span class="mi">6</span><span class="o">*</span><span class="mi">6</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* out_features*/</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* has_bias    */</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="c1">// 7) FC2: in=256, out=64, no bias</span>
<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Running FC2...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">fc_naive_int8</span><span class="p">(</span>
<span class="w">        </span><span class="cm">/* p_in        */</span><span class="w"> </span><span class="n">p_outfc1</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* p_w         */</span><span class="w"> </span><span class="n">p_wfc2</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* p_b         */</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w">  </span><span class="c1">// no bias for FC2</span>
<span class="w">        </span><span class="cm">/* p_out       */</span><span class="w"> </span><span class="n">p_outfc2</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* in_features */</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* out_features*/</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* has_bias    */</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="c1">// 8) FC3: in=64, out=10, with int16 bias</span>
<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Running FC3...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">fc_naive_int8</span><span class="p">(</span>
<span class="w">        </span><span class="cm">/* p_in        */</span><span class="w"> </span><span class="n">p_outfc2</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* p_w         */</span><span class="w"> </span><span class="n">p_wfc3</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* p_b         */</span><span class="w"> </span><span class="n">p_bfc3</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* p_out       */</span><span class="w"> </span><span class="n">p_outfc3</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* in_features */</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* out_features*/</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">        </span><span class="cm">/* has_bias    */</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="c1">// Done: p_outfc3 now has the logits for the 10 classes. </span>
<span class="w">    </span><span class="c1">// Print them out for debugging (optional).</span>
<span class="w">    </span><span class="c1">//----------------------------------------------------------------------------------</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Inference done. Printing final FC3 output:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Logit[%d] = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">p_outfc3</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// You might want to return an integer code or loop forever in a bare-metal system.</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>











<div id="__comments">



<h3>颜色主题调整</h3>

<div class="tx-switch">
<button data-md-color-scheme="default"><code>default</code></button>
<button data-md-color-scheme="slate"><code>slate</code></button>
</div>

<script>
var buttons = document.querySelectorAll("button[data-md-color-scheme]")
buttons.forEach(function(button) {
        button.addEventListener("click", function() {
        var attr = this.getAttribute("data-md-color-scheme")
        document.body.setAttribute("data-md-color-scheme", attr)
        localStorage.setItem("data-md-color-scheme",attr);
        updateScheme();
        })
})
</script>

<div class="tx-switch">
<button class="button1" data-md-color-primary="red" style="background-color:red">red</button>
<button class="button1" data-md-color-primary="pink" style="background-color:pink;color:black">pink</button>
<button class="button1" data-md-color-primary="purple" style="background-color:purple">purple</button>
<button class="button1" data-md-color-primary="indigo" style="background-color:indigo">indigo</button>
<button class="button1" data-md-color-primary="blue" style="background-color:blue">blue</button>
<button class="button1" data-md-color-primary="cyan" style="background-color:cyan;color:black">cyan</button>
<button class="button1" data-md-color-primary="teal" style="background-color:teal">teal</button>
<button class="button1" data-md-color-primary="green" style="background-color:green">green</button>
<button class="button1" data-md-color-primary="lime" style="background-color:lime;color:black">lime</button>
<button class="button1" data-md-color-primary="orange" style="background-color:orange;color:black">orange</button>
<button class="button1" data-md-color-primary="brown" style="background-color:brown;border-radius:3px">brown</button>
<button class="button1" data-md-color-primary="grey" style="background-color:grey">grey</button>
<button class="button1" data-md-color-primary="black" style="background-color:black">black</button>
<button class="button1" data-md-color-primary="white" style="background-color:white;color:black">white</button>
</div>

<script>
var buttons = document.querySelectorAll("button[data-md-color-primary]")
buttons.forEach(function(button) {
        button.addEventListener("click", function() {
        var attr = this.getAttribute("data-md-color-primary")
        document.body.setAttribute("data-md-color-primary", attr)
        localStorage.setItem("data-md-color-primary",attr);
        })
})
</script>

<h2 ><!-- 评论 -->评论区~</h2>


</div>

<script src="https://giscus.app/client.js"
        data-repo="trace1729/NCU-CS-BaoYan"
        data-repo-id="R_kgDOJ_FoOw"
        data-category="Q&A"
        data-category-id="DIC_kwDOJ_FoO84CYMDD"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a href="https://beian.miit.gov.cn/" target="_blank">赣ICP备2021010071号-1</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>